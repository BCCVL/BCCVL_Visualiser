#simple version of map file

MAP

    PROJECTION
        "init=epsg:3857"
    END

    # define the image type
    IMAGETYPE PNG8

    # define the area
    EXTENT -180 -90 180 90
    UNITS dd

    # define the default size of output image
    SIZE 256 256

    # define the background color
    TRANSPARENT ON
    IMAGECOLOR 255 255 255

    # SCALEBAR object
    SCALEBAR
        LABEL
            COLOR 0 0 0
            ANTIALIAS true
            SIZE large
        END
        STATUS ON
    END

    WEB
        METADATA
            # Enable all wms/wfs, etc. requests
            "ows_enable_request" "*"

            # Prevent the user from being able to request more than 5000 features
            "wfs_maxfeatures" "5000"
        END
    END

    OUTPUTFORMAT
        NAME "geojson"
        DRIVER "TEMPLATE"
        MIMETYPE "application/json; subtype=geojson"
        FORMATOPTION "FILE=point_api_v1_csv_to_geo_json_transform.tmpl"
        FORMATOPTION "STORAGE=memory"
    END

    LAYER

        NAME "DEFAULT"

# Set the CONNECTION programmatically in python.
#
#
#        CONNECTION "
#            <OGRVRTDataSource>
#                <OGRVRTLayer name='test_red_kangaroo_data'>
#                    <SrcDataSource>/tmp/bccvl/map_data_files/test_red_kangaroo_data.csv</SrcDataSource>
#                    <LayerSRS>WGS84</LayerSRS>
#                    <GeometryField encoding='PointFromColumns' x='longitude' y='latitude'/>
#                    <GeometryType>wkbPoint</GeometryType>
#                </OGRVRTLayer>
#            </OGRVRTDataSource>
#        "

        CONNECTIONTYPE OGR
        METADATA
                "wms_srs"   "4326"
                "wms_title" "default"
                "wfs_getfeature_formatlist" "geojson"
        END
        SIZEUNITS PIXELS
        STATUS ON
        TOLERANCE 0
        TOLERANCEUNITS PIXELS
        TYPE POINT
        UNITS dd
        CLASS
                STYLE
                        COLOR 255 0 0
                        MAXSIZE 100
                        MINSIZE 1
                        SIZE 6
                        SYMBOL "star"
                END
        END

        # OUTPUT_FORMAT "geojson"

    END

    LAYER
        NAME "BACKUP"
        CONNECTIONTYPE OGR
        CONNECTION "input.csv"

        METADATA
            "wfs_title"         "DEFAULT"
            "wfs_description"   "DEFAULT"
            "wfs_featureid"     "ID"
            "wfs_srs"           "EPSG:27700"
            "wfs_getfeature_formatlist" "csv,ogrgml,shapezip,midmif,geojson,csvstream"
            "gml_include_items" "all"
            "gml_types"         "auto"
            "wfs_geomtype"      "Geometry"
        END

        TYPE POINT
        STATUS ON
        PROJECTION
            "init=epsg:27700"
        END

        DUMP TRUE

    END

END
